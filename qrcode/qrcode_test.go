package qrcode_test

import (
	"testing"

	"github.com/sdjqwbz/go-mods/qrcode"
)

// gopher logo base64
var testCenterImage = `iVBORw0KGgoAAAANSUhEUgAAABcAAAAgCAYAAAD5VeO1AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAjqAAAI6gHE1yr5AAAAB3RJTUUH5AscDRcsE51RJAAABeJJREFUSMetlFlsHEUax/9V1d1zeDyecds99vjKYOwYX8GQsKsgSJw4XisQLRAeULgUIVBWuyCtkOCJB8TDZrUPaPMC4hlEOKLgkAhBjG02CY6TxXGcYJMDO/aMp8eeydxn93QXDz4SWAIL8V8q9UvVT9/3q+qPAEBleRlamxpAKcGVmXkEQhFUK+Utf+y6q7ehxrNFdjtbS0tsikWSHIwRkXMY+YKWjEQT07PzC4MjY1MfXJ4JjAEAIYRxnjCafa0g2zd34avRiYqNnc13CwLD5elAqG/Lpt3tzQ1PVcrudeXuUqFKdsFmswAcIJQgmcpgPpxCvsiRz2WQTiZmvxq98J7TYbf76qq8M/7QxeMnv3mH1Hkr1z31SM9bGzuatobCMUzPqYn2lkbFKteTWl8LNE1D4OoF1JQBilyGSDQJNWfFvZt74HK7sRBScX5kAMhFMBtYQEW5E16PjKNfjr7JHryv89lHe+//69HBUVENR4W+LZschqOGbNu5G61t7fA13onaO1rw37FxlFk4LgeTKK9rhaIoqK+vh6eqCg63B+rsZchOK/759ofY1NkMq1UilBBQECCeTKOrrRFFTjB08iyeefppjI+PAwBkWUZ9UwfCsSTmghG8+OJL2L9/P7LZLADAW1ODIrFgva8WTz6yHaIgIKBGpujE1Ez/6LmpwXvam4r3tN0J0zQRDAZBCAHnHCvh3IRVEuF22tHd3Y2enh5IkgQASMQT4MU8BEFA+/p16D8+8sXAqXP/EDpbfNP/euejF15+/vF+u83arrhNPLzjQfxhax82bNgAAFBVFWdODSEfV2GYBDu6t2Lbtu0wDBPhsIrhL47A67YCBJBdTlBKTnoqXFeET788DatFKtRVKzZKCZylJbhD1vHtmSEsBK7BMHR8e+4Mjh8fwIkzFyG7S/FENotMxA+bwwlTy8DrsqBSdsI0OWwWCVWV5Y3vHxkiwvI7d5XYLU6AgHMTVZUuuAsaUskr0PQiMrEgHureiPU+L9xlDjhK7GDFJNq8Cgi1gRC6qpAxihK7tQKAIACA1SpJAmPiDb8ckiSiwiKhaBiQXWVYTORR29wFmAZSET86ZBcoY+Cc/+huCCGQRMG+CjcM0zA5N/GTcM7BKMXme1txcT6P6sa7IQgM6uQJNHg9MG+C3gxnlDIAS1oSqUy2UNDzuEVEUYSNxHFpbBiMMfgUGzh+MQQABACIxlOJdDYX55x7b7V7fX0FmmrNZa/sRyr+p2PABAC63H4mmc4umuatDxBCwBgDY+wXS+ZLPA6AU4/HA855NpvLXzdNE7cbsrQoAJMyxqp29Pb25TSzFr9m8v+BE4AKUtPevXtfFfbs2XP0sd27O775z2fSbZOXoyhK9dY/73ydRiIR4/z58xcDczPXCKVrUDlFJhmLHjx4sJ8eO3Zs11/27dslEmNyDawAAErsluyBAwdeEXRdXwQgMoExQtYGLomCpd6riDQejwMApSC372Q5AmOi1SJKK0ACsnZwQgihlN64QUKwRlKWZpWmF/UblWOt4Bz5gpaNxlPpmypfGz7nHLFkejGeTMdW4MV8Qcv8zNT9zdH0ItTF61MAkitw3R8Mn0tn88sd/L5QShC+njCmrvoHABirWs5OXDo0eWU28HvBhAC6buDsxKWvR8YmjwHA6vyMRBOLnPOUIpdtUSrclt/SAaUExaKBwdMTsXcPD7xksVovRONJ3DycaXNbV0OpXNNbyOccFgGwWiSsvFZCCAhZ+RJQuvRrGIaJ+YUILsxE4et4gNpKy2OnRk6fyOVy+iq8s7Ozo6/vT+8+s/c57+T38/MffHx4UNf0jKbr9qJhiEXDoJpuIF/QkM7meCSa1Kbn1PDo+NTI4c9P/VsT3Nd2PrRrYyikdvn9/kFVVeeEFXg8Hjf8fn++/5NPpg4dOvS34eHhkx8dHXJ3tvjuqquubHGWltRIomA3TFPP5Qqx6/HU7Pdz6nf+4OLVN1/bl/77G2+XORwOezAYrAuFQkEA+AHC3IlZadeQvQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0xMS0yOFQxMzoyMzo0NCswMDowMPqtd/cAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjAtMTEtMjhUMTM6MjM6NDQrMDA6MDCL8M9LAAAAIHRFWHRzb2Z0d2FyZQBodHRwczovL2ltYWdlbWFnaWNrLm9yZ7zPHZ0AAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAYdEVYdFRodW1iOjpJbWFnZTo6SGVpZ2h0ADM1OA+5AykAAAAXdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgAMjY1yBYWPQAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNjA2NTY5ODI0+BKW4wAAABN0RVh0VGh1bWI6OlNpemUAMjUxMDZCQk3RuscAAABSdEVYdFRodW1iOjpVUkkAZmlsZTovLy4vdXBsb2Fkcy81Ni9CT0RDSjlxLzI2OTkvZ29sYW5nX2dvcGhlcl9zcmNfbG9nb19pY29uXzE2ODE1NS5wbmfDYXVoAAAAAElFTkSuQmCC`

func TestQrcode_SimpleQr(t *testing.T) {
	// 简单带图片格式前缀二维码
	qr, err := qrcode.New("hello world!").SaveAsB64Str(true)
	if err != nil {
		t.Error(err)
	}
	t.Logf("%s\n", qr)
}

func TestQrcode_WithCenterImgQr(t *testing.T) {
	// 带中心图二维码
	qr := qrcode.New(
		"hello world!",
		qrcode.WithSize(120),
		qrcode.WithCenterImg(testCenterImage, 23, 32),
	)
	imgStr, err := qr.SaveAsB64Str(false)
	if err != nil {
		t.Error(err)
	}
	t.Logf("%s\n", imgStr)
}
